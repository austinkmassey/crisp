# Crisp Framework

## Charter

### Purpose
The purpose of this project is to enhance and organize developers projects by combining Agile methodologies with Docs-as-Code principles by providing tools and documentation. It exists to explore, validate, and refine these practices while fostering collaboration and innovation in small-team and individual projects.

### Stakeholders
- **Primary User**: The tool’s developer (me).
- **Secondary Users**: Developers, Agile practitioners, Docs-as-Code practitioners, and terminal enthusiasts.

### Objectives
- Define and demonstrate a "crispy" version of Agile combined with Docs-as-Code principles, tailored for individual workflows and version-controlled repositories.
- Create a terminal tool doing Agile in a Docs-as-Code way, Crisp
- Iteratively improve on tools and principles by using then in multiple projects ("dogfooding").
- Publish a well-documented, functional tool on GitHub.

### Risks
- Limited productivity improvement.
- Introduction of unnecessary complexity into projects, governance, git logs, or build processes.

### Success Metrics
- Observed improvement in productivity and focus when using Crisp on various projects.
- Positive feedback from users and the development community.
- Engagement on GitHub (stars, issues, contributions).
- Long-term personal adoption and iterative enhancements.

---

## Crisp Implementation

### Requirements
- Operates solely via command-line interface and text editors (e.g., Vim-aware templates with navigable elements like Ctrl + G, F).
- Facilitates navigation and review of Agile artifacts with autogenerated indexes.
- Minimizes reliance on external scripts, tools, or files (except `make`, `bash`, `yq`).
- Encapsulated within the parent project’s `.crisp` folder and installed per-project.
- Leverages `make` for dependency evaluation when creating indexes.
- Uses `yq` to parse frontmatter in markdown artifacts.
- Generates Agile artifacts (backlogs, sprints, sessions) from customizable templates.
- Supports flexible project customization through templates, configurations, and automated testing.

### Usage

To start using Crisp with any project:
- Copy Crisp’s repository into a `.crisp` folder in the project.
- The project is set up with default templates and configurations.
- Run `source ./.crisp/scripts/activate.sh` at the start of a session to enable Crisp commands for this project.
- Run `source ./.crisp/scripts/deactivate.sh` to stop using Crisp or before switching to a new project in the current shell.

After activating Crisp:
- Use `crisp add <backlog/sprint/session>` to generate a new Agile artifact.
- After adding or modifying entries, run `crisp index` to generate index files in your project’s directory.

---

## In Situ Crisp

Projects initialized with Crisp follow this structure:

```
- project_files...
- .crisp
    - config.yaml
    - crisp                # Main executable
    - Makefile.crisp       # Helps create index artifacts and scan folders
    - scripts
        - activate.sh
        - deactivate.sh
        - add.sh
        - status.sh
        - index.sh
    - backlog
        - <backlog_id>.md
    - session
        - <session_id>.md
    - sprint
        - <sprint_id>.md
    - template
        - backlog.template
        - session.template
        - sprint.template
```

---

## Commands

### `crisp status`
Displays the current Crisp project location (.crisp folder) and high-level project information.

### `crisp add <backlog/sprint/session>`
Generates a new artifact file (backlog, sprint, or session) based on templates and user-defined parameters.

### `crisp index <backlog/sprint/session/all> [--hard]`
Updates index files. The `--hard` flag regenerates indexes from scratch by scanning all artifacts.

---

## Crispy Agile

Crisp incorporates three Agile-inspired concepts:

### Backlog
A prioritized collection of features, tasks, or user stories for implementation. Each backlog item tracks:
- **Priority**: Must Have, Should Have, Could Have, or Won’t Have.
- **Status**: Open, Closed, or Deferred.
- **Sprint**: The sprint the backlog belongs to.

```yaml
title: "Descriptive Title of Backlog Item"
priority: <priority>
status: <status>
sprint: [[path/to/sprint.md]]
time: "Estimated time to complete"
```

### Sprint
A grouping of backlog items planned for execution within a defined timeframe. Each sprint includes:
- Defined goals, start and end dates, and stakeholders.
- A list of associated backlog items.
- Sprint review and retrospective.

```yaml
sprint: <incremented sprint number>
start_date: <date>
end_date: <date>
goal: "Descriptive goal of sprint"
stakeholders: "List of stakeholder emails"
```

### Session
An individual development effort, similar to a daily Agile meeting. Sessions record:
- Immediate goals and ongoing tasks.
- Status updates relevant to the current sprint.

```yaml
session: <incremented session number>
date: <date>
description: "Short description of this session"
```

### Artifact Structure
Each concept is represented by a markdown-based artifact file with metadata in frontmatter. Artifacts are linked through autogenerated index files:
- **Backlog Index**: Lists all backlog items.
- **Sprint Index**: Summarizes all sprints.
- **Session Index**: Tracks all sessions.

Indexes are ephemeral and autogenerated. They include:
- Artifact paths.
- Parsed frontmatter (e.g., status, descriptions).

Artifact files, initialized from templates, remain editable by developers but unmodified by Crisp after creation.

---

## Testing with Bats

Usage

    Install Bats (optional):
    If you want to run the tests, install bats-core.

    Initialize Crisp in your project:
    Copy the .crisp folder into the root of your repository.

    Activate Crisp in your shell:

source .crisp/scripts/activate.sh

Use Crisp:

    crisp status
    crisp add backlog
    crisp add sprint
    crisp add session
    crisp index all or crisp index backlog/sprint/session

Deactivate Crisp when done:

source .crisp/scripts/deactivate.sh

Run tests in test/crisp_tests.bats (from your test directory):

    bats crisp_tests.bats

This layout and code give you a minimal, functional Crisp framework to build upon, along with automated tests to ensure your Crisp commands work as expected. Adjust the scripts, Makefile, and test logic as your project grows and requires additional functionality!

---

## Crisp Backlog

This is a small backlog for the implementation of the Crisp CLI.

### Artifact Creation
As a user, I want to be able to create artifacts of a specified type so I can fill them out with a text editor plan out my project.

**Given** A activated environment **when** they execute the command `crips <item>` **then** Crisp will create the item in the `.crisp/<item>` folder of the current environment

### Indexing
As a user, I want to be able to see a short summary of all of my artifacts in index files so that I can review or navigate to them easily.

**Given** a project with artifacts, **when** I run `crisp index`, **then** all index files are updated to reflect current artifacts.

**Given** a project with existing index files, **when** I run `crisp index`, **then** only artifacts with modified timestamps after the modified timestamp of their index will be parsed and updated in the file.

**Given** aproject with existing index file, **when** I run `crisp index`, **then** only the entries in the index that need to be updated will be changed, all other entries that point to artifacts that have not been changed will persist in the next version of the index file.

As a user, I want to be able to completely reset (delete index files, rescan all artifacts, create new index files) all index file by calling `crisp index --hard` so that I can see the current state of all artifacts with confidence.

**Given** a project with existing indexes and artifacts, **when** `crisp index --hard` is executed, all index files are deleted and recreated.
